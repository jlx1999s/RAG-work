# ============================================================================
# RAG Backend 环境变量配置模板
# ============================================================================
# 使用说明: 复制此文件为 .env 并填写实际配置值
# cp .env.example .env

# ============================================================================
# 数据库配置 - MySQL (业务数据存储)
# ============================================================================
# MySQL连接字符串格式: mysql+pymysql://用户名:密码@主机:端口/数据库名
DB_URL=mysql+pymysql://root:password@localhost:3306/rag_db

# ============================================================================
# 数据库配置 - PostgreSQL (LangGraph状态持久化)
# ============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=rag_checkpoint
POSTGRES_USER=postgres
POSTGRES_PASSWORD=123456

# ============================================================================
# API密钥配置
# ============================================================================
# 阿里云DashScope API密钥 (必需 - 用于通义千问模型)
DASHSCOPE_API_KEY=sk-your-dashscope-api-key

# MinerU OCR服务配置 (可选 - 用于文档OCR识别)
MINERU_API_URL=http://your-mineru-service-url
MINERU_API_KEY=your-mineru-api-key

# DeepSeek API密钥 (可选 - 如使用DeepSeek模型)
# DEEPSEEK_API_KEY=your-deepseek-api-key

# ============================================================================
# 向量数据库配置 - Milvus
# ============================================================================
MILVUS_URI=localhost:19530
MILVUS_DB_NAME=default
# Collection名称由系统自动生成,格式: kb{library_id}_{timestamp_ms}
# MILVUS_COLLECTION_NAME=your_collection_name

# ============================================================================
# 图数据库配置 - LightRAG
# ============================================================================
# LightRAG工作目录 (存储图数据)
LIGHTRAG_WORKSPACE=/path/to/lightrag/workspace

# ============================================================================
# 对象存储配置 - 阿里云OSS
# ============================================================================
OSS_ACCESS_KEY_ID=your-oss-access-key-id
OSS_ACCESS_KEY_SECRET=your-oss-access-key-secret
OSS_REGION=oss-cn-shanghai
OSS_ENDPOINT=https://oss-cn-shanghai.aliyuncs.com
OSS_BUCKET_NAME=your-bucket-name

# ============================================================================
# JWT认证配置
# ============================================================================
# JWT密钥 (必需 - 建议使用强随机字符串)
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production

# JWT算法
JWT_ALGORITHM=HS256

# Access Token过期时间 (秒) - 默认24小时
JWT_ACCESS_TOKEN_EXPIRES=86400

# Refresh Token过期时间 (秒) - 默认7天
JWT_REFRESH_TOKEN_EXPIRES=604800

# ============================================================================
# Redis配置 (可选 - 用于缓存)
# ============================================================================
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ============================================================================
# 应用配置
# ============================================================================
# 应用运行模式 (development/production)
APP_ENV=development

# 日志级别 (DEBUG/INFO/WARNING/ERROR)
LOG_LEVEL=INFO

# FastAPI服务配置
API_HOST=0.0.0.0
API_PORT=8000

# ============================================================================
# LangGraph配置
# ============================================================================
# 是否启用Checkpoint (生产环境建议启用)
LANGGRAPH_ENABLE_CHECKPOINT=true

# LangGraph Studio调试模式 (仅开发环境使用)
LANGGRAPH_STUDIO_MODE=false

# ============================================================================
# 文档处理配置
# ============================================================================
# 文档切块大小
CHUNK_SIZE=1000

# 文档切块重叠大小
CHUNK_OVERLAP=200

# 最大文档大小 (MB)
MAX_DOCUMENT_SIZE=50

# ============================================================================
# 检索配置
# ============================================================================
# 默认检索模式 (vector_only/graph_only/auto/no_retrieval)
DEFAULT_RETRIEVAL_MODE=auto

# 向量检索TopK数量
VECTOR_SEARCH_TOP_K=5

# 图检索模式 (local/global/hybrid)
GRAPH_SEARCH_MODE=hybrid
